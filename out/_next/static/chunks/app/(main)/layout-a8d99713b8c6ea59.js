(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{7314:(e,t,n)=>{Promise.resolve().then(n.bind(n,76333)),Promise.resolve().then(n.bind(n,24953)),Promise.resolve().then(n.bind(n,76955)),Promise.resolve().then(n.bind(n,97786)),Promise.resolve().then(n.bind(n,91261)),Promise.resolve().then(n.bind(n,11900)),Promise.resolve().then(n.bind(n,60943)),Promise.resolve().then(n.bind(n,30024)),Promise.resolve().then(n.bind(n,95556)),Promise.resolve().then(n.bind(n,40171)),Promise.resolve().then(n.bind(n,56288)),Promise.resolve().then(n.bind(n,5815)),Promise.resolve().then(n.bind(n,15040)),Promise.resolve().then(n.bind(n,57267)),Promise.resolve().then(n.bind(n,74135)),Promise.resolve().then(n.bind(n,27096)),Promise.resolve().then(n.bind(n,69351)),Promise.resolve().then(n.bind(n,72185)),Promise.resolve().then(n.bind(n,56150)),Promise.resolve().then(n.bind(n,17532)),Promise.resolve().then(n.bind(n,31775)),Promise.resolve().then(n.bind(n,86469)),Promise.resolve().then(n.bind(n,43965)),Promise.resolve().then(n.bind(n,975)),Promise.resolve().then(n.bind(n,44169)),Promise.resolve().then(n.bind(n,56526)),Promise.resolve().then(n.bind(n,46501)),Promise.resolve().then(n.bind(n,22293)),Promise.resolve().then(n.bind(n,9457)),Promise.resolve().then(n.bind(n,78352)),Promise.resolve().then(n.bind(n,91976)),Promise.resolve().then(n.bind(n,3246)),Promise.resolve().then(n.bind(n,63139)),Promise.resolve().then(n.bind(n,44039)),Promise.resolve().then(n.bind(n,87801)),Promise.resolve().then(n.bind(n,83444)),Promise.resolve().then(n.bind(n,6555)),Promise.resolve().then(n.bind(n,98356)),Promise.resolve().then(n.bind(n,39206)),Promise.resolve().then(n.bind(n,12759)),Promise.resolve().then(n.bind(n,79969)),Promise.resolve().then(n.bind(n,63097))},6808:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,t:()=>a});var s=n(95155),r=n(12115),i=n(89903),l=n(61086),o=n(76046);let a=(0,r.createContext)(void 0);async function d(e){let t=e.user.user_metadata.full_name,n=e.user.user_metadata.picture;if("string"!=typeof t||"string"!=typeof n)throw Error("invalid user metadata");return(await (0,l.N)().from("profiles").insert({name:t,picture:n}).select().single()).data}function u(e){let{children:t}=e,[n,u]=(0,r.useState)(void 0),h=(0,r.useContext)(i.I),c=(0,o.useRouter)();return(0,r.useEffect)(()=>{null===n&&h&&d(h).then(u,()=>{location.pathname.startsWith("/profile")||c.push("/profile")})},[n]),(0,r.useEffect)(()=>{h?(0,l.N)().from("profiles").select("*").eq("id",h.user.id).single().then(e=>{u(e.data)}):u(h)},[h]),(0,s.jsx)(a.Provider,{value:n,children:t})}},89903:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,I:()=>l});var s=n(95155),r=n(12115),i=n(61086);let l=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[n,o]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{let{data:{subscription:e}}=(0,i.N)().auth.onAuthStateChange((e,t)=>{o(t)});return e.unsubscribe},[]),(0,s.jsx)(l.Provider,{value:n,children:t})}},61086:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var s=n(6719);let r=null;function i(){return r=null!=r?r:new s.A("https://alyijvsqnohukelkwhgu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFseWlqdnNxbm9odWtlbGt3aGd1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ1ODYwNzYsImV4cCI6MjA1MDE2MjA3Nn0.FESZqJzs4FnNdxhoWrNXNczU-rjHLtwPfm8P9qZhNpU")}},70094:(e,t,n)=>{"use strict";n.d(t,{F:()=>r,M:()=>i});var s=n(61086);function r(e){if(!e)return;if(e.startsWith("http"))return e;let[t,...n]=e.split("/");return(0,s.N)().storage.from(t).getPublicUrl(n.join("/")).data.publicUrl}async function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of t.filter(e=>null!=e).map(e=>{if(e.startsWith("http"))return;let[t,...n]=e.split("/");if(t.length&&n.length)return{bucket:t,nodes:n}}).filter(e=>void 0!==e))try{await (0,s.N)().storage.from(e.bucket).remove([e.nodes.join("/")])}catch(e){console.error(e)}}},61692:(e,t,n)=>{"use strict";function s(e){let{when:t,children:n}=e;return t?n:null}n.d(t,{A:()=>s})},63097:(e,t,n)=>{"use strict";n.d(t,{default:()=>y});var s=n(95155),r=n(61086);function i(){(0,r.N)().auth.signOut()}var l=n(6808),o=n(89903),a=n(96098),d=n(30405),u=n(17753),h=n(35435),c=n(61326),v=n(13903),m=n(42966),f=n(73875),x=n(94843),b=n(51055),p=n(71918),P=n(86659),j=n(92823),g=n(91637),N=n(67396),C=n(76046),I=n(12115),w=n(61692),A=n(70094);let E=(0,I.createContext)({expanded:!0,setExpanded:e=>{}});function y(){let[e,t]=(0,I.useState)({expanded:!0,setExpanded:e=>t(t=>({...t,expanded:e}))});function n(){window.innerWidth<600&&e.setExpanded(!1)}return(0,I.useEffect)(()=>(n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[]),(0,s.jsx)(E.Provider,{value:e,children:(0,s.jsxs)("div",{className:"h-full bg-[#f3f3f3] flex flex-col flex-shrink-0",children:[(0,s.jsx)(z,{}),(0,s.jsx)(k,{}),(0,s.jsx)(S,{})]})})}function z(){var e,t;let n=(0,I.useContext)(l.t),r=(0,I.useContext)(o.I),m=(0,I.useContext)(E);return(0,s.jsxs)("div",{className:(0,a.cn)("flex flex-col p-2 gap-2"),children:[(0,s.jsx)(N.default,{href:"/",className:"my-2",children:(0,s.jsx)(_,{className:"justify-start",name:(0,s.jsx)("p",{className:"font-bold text-inherit",children:"ABSEN"}),avatarProps:{src:"/globe.svg",radius:"lg"}})}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)(N.default,{href:r?"/profile":"/signin",children:(0,s.jsx)(_,{description:null!==(e=null==r?void 0:r.user.role)&&void 0!==e?e:"unauthenticated",name:null!==(t=null==n?void 0:n.name)&&void 0!==t?t:r?"Setup":"Sign In",avatarProps:{src:(0,A.F)(null==n?void 0:n.picture),isBordered:!0,showFallback:!0}})}),m.expanded&&(0,s.jsxs)(d.A,{children:[(0,s.jsx)(u.b,{children:(0,s.jsx)(h.T,{size:"sm",variant:"light",isIconOnly:!0,children:(0,s.jsx)(b.A,{size:16})})}),(0,s.jsx)(c.y,{children:(0,s.jsx)(v.Y,{onPress:i,children:"Logout"},"logout")})]})]})]})}function k(){let e=(0,I.useContext)(o.I);return(0,s.jsxs)(m.H,{className:"h-full p-2 gap-2 flex flex-col",children:[(0,s.jsx)(O,{as:N.default,href:"/live",variant:"light",startContent:(0,s.jsx)(p.A,{size:18}),children:"Live Absen"}),(0,s.jsxs)(w.A,{when:!!e,children:[(0,s.jsx)(O,{as:N.default,href:"/attendances",variant:"light",startContent:(0,s.jsx)(P.A,{size:18}),children:"Rekap"}),(0,s.jsx)(w.A,{when:(null==e?void 0:e.user.role)==="manager",children:(0,s.jsx)(O,{as:N.default,href:"/members",variant:"light",startContent:(0,s.jsx)(j.A,{size:18}),children:"Anggota"})})]})]})}function S(){let e=(0,I.useContext)(E);return(0,s.jsx)("div",{className:"p-2 gap-2 flex flex-col",children:(0,s.jsx)(O,{onPress:()=>e.setExpanded(!e.expanded),variant:"flat",startContent:(0,s.jsx)(g.A,{size:18}),children:"Expand"})})}function O(e){let t=(0,I.useContext)(E),n=(0,C.usePathname)(),r=e.href&&n.startsWith(e.href);return(0,s.jsx)(h.T,{...e,variant:r?"flat":e.variant,color:r?"primary":"default",isIconOnly:!t.expanded,className:(0,a.cn)(e.className,{"justify-start":t.expanded}),children:t.expanded?e.children:null})}function _(e){return(0,I.useContext)(E).expanded?(0,s.jsx)(x.S,{...e,className:(0,a.cn)("justify-start min-w-40",e.className)}):(0,s.jsx)(f.Q,{...e.avatarProps})}}},e=>{var t=t=>e(e.s=t);e.O(0,[555,435,334,467,791,982,274,677,719,239,205,396,225,486,441,517,358],()=>t(7314)),_N_E=e.O()}]);