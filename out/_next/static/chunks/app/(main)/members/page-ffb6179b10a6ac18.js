(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{92463:(t,e,s)=>{Promise.resolve().then(s.bind(s,53524))},51710:(t,e,s)=>{"use strict";s.d(e,{A:()=>i});let i=(0,s(67401).A)("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},20853:(t,e,s)=>{"use strict";s.d(e,{A:()=>i});let i=(0,s(67401).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},196:(t,e,s)=>{"use strict";s.d(e,{A:()=>i});let i=(0,s(67401).A)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]])},45686:(t,e,s)=>{"use strict";s.d(e,{A:()=>i});let i=(0,s(67401).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},53524:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>tt});var i=s(95155),r=s(35435),n=s(62113),a=s(61086),o=s(33048),l=s(66605),c=s(93800),u=s(8016),h=s(20588),d=s(72366),m=s(99253),p=s(30633),y=s(94843),x=s(52043),f=s(547),v=s(48617),j=s(67401);let g=(0,j.A)("UserRoundPen",[["path",{d:"M2 21a8 8 0 0 1 10.821-7.487",key:"1c8h7z"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}]]);var b=s(45686),w=s(12475),k=s(89903),C=s(32092),N=s(70094),M=s(21567),O=s(86225),A=s(4278),E=s(33695),R=s(38684),z=s(27317),I=s(52997),S=s(69623),P=s(81287),F=s(47684),q=s(35906),_=s(25848),T=s(92807);let U=(0,j.A)("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),D=(0,j.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var L=s(67396),J=s(12115),K=s(30814);function W(t){let{member:e}=t,s=(0,O.j)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.I,{content:"Review Pending",placement:"left",children:(0,i.jsx)(r.T,{onPress:s.onOpen,size:"sm",isIconOnly:!0,variant:"light",color:"warning",children:(0,i.jsx)(U,{strokeWidth:1.5,size:16})})}),(0,i.jsx)(A.Y,{isOpen:s.isOpen,onOpenChange:s.onOpenChange,hideCloseButton:!0,scrollBehavior:"outside",children:(0,i.jsx)(E.g,{children:()=>(0,i.jsx)(G,{member:e,modal:s})})})]})}function G(t){var e;let{member:s,modal:n}=t,o=(e=s.id,(0,f.I)({initialData:[],queryKey:["faces-list"],queryFn:async()=>{let t=await (0,a.N)().from("face_requests").select("*").eq("profile_id",e);if(t.error)throw t.error;return t.data}}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(R.c,{children:["Review ",s.name," Pending"]}),(0,i.jsx)(z.h,{className:"items-center",children:o.data.map(t=>(0,i.jsx)(Z,{face:t},t.id))}),(0,i.jsx)(I.q,{children:(0,i.jsx)(r.T,{onPress:n.onClose,children:"Kembali"})})]})}function Z(t){let{face:e}=t,s=(0,C.O)(),n=(0,J.useContext)(k.I),o=(0,q.jE)(),l=(0,_.n)({mutationFn:async()=>{if(!n)throw Error("session error");let t=await T.Ay.get((0,N.F)(e.image)).blob(),i=new FormData;i.set("file",t),i.set("token",n.access_token);let r=await T.Ay.post("".concat((0,M.Rp)(s,["BACKEND_SERVER","value"],"http://localhost:9898"),"/faces"),{json:{request_id:e.id,token:n.access_token},credentials:"include"}).json();return await (0,a.N)().from("face_requests").delete().eq("id",e.id),o.invalidateQueries({queryKey:["faces-list"]}),r}}),c=(0,_.n)({mutationFn:async()=>{let[t,...s]=e.image.split("/");await (0,a.N)().storage.from(t).remove([s.join("/")]),await (0,a.N)().from("face_requests").delete().eq("id",e.id),o.invalidateQueries({queryKey:["faces-list"]})}});return(0,J.useEffect)(()=>{l.isError&&K.o.error(l.error.message)},[l.isError]),(0,J.useEffect)(()=>{c.isError&&K.o.error(c.error.message)},[c.isError]),(0,i.jsxs)(S.Z,{className:"w-full h-auto aspect-video",children:[(0,i.jsx)(P.W,{className:"object-cover",height:200,src:(0,N.F)(e.image),width:200}),(0,i.jsxs)(F.Z,{className:"gap-3 before:bg-white/10 border-white/20 border-1 overflow-hidden py-1 absolute before:rounded-xl rounded-large bottom-1 w-[calc(100%_-_8px)] shadow-small ml-1 z-10 bg-black/50 backdrop-blur-sm",children:[(0,i.jsx)(r.T,{className:"text-tiny text-white",color:"danger",radius:"lg",size:"sm",variant:"bordered",isLoading:c.isPending,onPress:()=>c.mutate(),children:"Decline"}),(0,i.jsx)(r.T,{className:"text-tiny text-white",color:"success",radius:"lg",size:"sm",isLoading:l.isPending,onPress:()=>l.mutate(),children:"Accept"}),(0,i.jsx)(r.T,{className:"text-tiny",radius:"lg",size:"sm",isIconOnly:!0,as:L.default,href:e.image,target:"_blank",children:(0,i.jsx)(D,{size:18})})]})]})}function Q(t){switch(t){case"accepted":return"success";case"pending":return"warning";default:return"default"}}function B(){let t=(0,f.I)({initialData:[],queryKey:["member-list","faces-list"],queryFn:async()=>{let t=await (0,a.N)().from("members").select("*");if(t.error)throw t.error;return t.data}});return(0,i.jsxs)(o.j,{isCompact:!0,children:[(0,i.jsxs)(l.X,{columns:["Nama"],children:[(0,i.jsx)(c.e,{children:"Nama"}),(0,i.jsx)(c.e,{children:"UID"}),(0,i.jsx)(c.e,{children:"Role"}),(0,i.jsx)(c.e,{children:"Joined At"}),(0,i.jsx)(c.e,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(u.I,{content:(0,i.jsx)(H,{}),showArrow:!0,shouldFlip:!0,children:(0,i.jsx)(v.A,{size:16})}),"Status"]})}),(0,i.jsx)(c.e,{align:"center",children:"Aksi"})]}),(0,i.jsx)(h.E,{isLoading:t.isFetching,loadingContent:(0,i.jsx)(d.o,{label:"Loading ..."}),children:t.data.map(t=>{var e;return(0,i.jsxs)(m.s,{children:[(0,i.jsx)(p.w,{children:(0,i.jsx)(y.S,{name:t.name,description:t.email,avatarProps:{src:(0,N.F)(t.picture),size:"sm"}})}),(0,i.jsx)(p.w,{children:null!==(e=t.uid)&&void 0!==e?e:"-"}),(0,i.jsx)(p.w,{children:t.role}),(0,i.jsx)(p.w,{children:w.c9.fromISO(t.created_at).toLocaleString()}),(0,i.jsx)(p.w,{children:(0,i.jsx)(x.R,{size:"sm",className:"border-none",variant:"dot",color:Q(t.status),children:t.status})}),(0,i.jsxs)(p.w,{children:[(0,i.jsx)(u.I,{content:"Edit",placement:"left",children:(0,i.jsx)(r.T,{size:"sm",isIconOnly:!0,variant:"light",children:(0,i.jsx)(g,{strokeWidth:1.5,size:16})})}),(0,i.jsx)(u.I,{content:"Hapus",placement:"left",children:(0,i.jsx)(r.T,{size:"sm",isIconOnly:!0,variant:"light",color:"danger",children:(0,i.jsx)(b.A,{strokeWidth:1.5,size:16})})}),(0,i.jsx)(W,{member:t})]})]},t.id)})})]})}function H(){return(0,i.jsx)("table",{children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(x.R,{size:"sm",className:"border-none",variant:"dot",color:Q("idle"),children:"Idle"})}),(0,i.jsx)("td",{children:"anggota hanya login dan tidak menginput data wajah"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(x.R,{size:"sm",className:"border-none",variant:"dot",color:Q("pending"),children:"Pending"})}),(0,i.jsx)("td",{children:"anggota telah menginput data wajah yang belum di review"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(x.R,{size:"sm",className:"border-none",variant:"dot",color:Q("accepted"),children:"Accepted"})}),(0,i.jsx)("td",{children:"semua data wajah anggota telah di review dan di terima"})]})]})})}let V=(0,j.A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var X=s(20853),Y=s(196),$=s(51710);function tt(){return(0,i.jsx)("div",{className:"p-5 bg-gradient h-full",children:(0,i.jsxs)("div",{className:"max-w-[1024px] mx-auto mt-10",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h2",{className:"text-2xl text-white font-bold",children:"Anggota"}),(0,i.jsx)(r.T,{color:"primary",endContent:(0,i.jsx)(V,{size:18}),children:"Tambah"})]}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-3 items-center my-5",children:[(0,i.jsx)(n.r,{size:"sm",placeholder:"Search",className:"w-auto",endContent:(0,i.jsx)(X.A,{size:18})}),(0,i.jsx)(r.T,{size:"sm",startContent:(0,i.jsx)(Y.A,{size:14}),children:"Filter"}),(0,i.jsx)(r.T,{size:"sm",startContent:(0,i.jsx)($.A,{size:14}),children:"Sort"})]}),(0,i.jsx)(B,{})]})})}},89903:(t,e,s)=>{"use strict";s.d(e,{A:()=>o,I:()=>a});var i=s(95155),r=s(12115),n=s(61086);let a=(0,r.createContext)(void 0);function o(t){let{children:e}=t,[s,o]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{let{data:{subscription:t}}=(0,n.N)().auth.onAuthStateChange((t,e)=>{o(e)});return t.unsubscribe},[]),(0,i.jsx)(a.Provider,{value:s,children:e})}},61086:(t,e,s)=>{"use strict";s.d(e,{N:()=>n});var i=s(6719);let r=null;function n(){return r=null!=r?r:new i.A("https://alyijvsqnohukelkwhgu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFseWlqdnNxbm9odWtlbGt3aGd1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ1ODYwNzYsImV4cCI6MjA1MDE2MjA3Nn0.FESZqJzs4FnNdxhoWrNXNczU-rjHLtwPfm8P9qZhNpU")}},32092:(t,e,s)=>{"use strict";s.d(e,{O:()=>n});var i=s(12115),r=s(61086);function n(){let[t,e]=(0,i.useState)({});async function s(){let{data:s}=await (0,r.N)().from("settings").select();e(()=>{var e;return null!==(e=null==s?void 0:s.reduce((t,e)=>({...t,[e.key]:e}),t))&&void 0!==e?e:t})}return(0,i.useEffect)(()=>{s();let t=(0,r.N)().channel("settings").on("postgres_changes",{event:"*",schema:"public",table:"settings"},t=>{"UPDATE"===t.eventType&&e(e=>({...e,[t.new.key]:t.new}))}).subscribe();return()=>{t.unsubscribe()}},[]),t}},70094:(t,e,s)=>{"use strict";s.d(e,{F:()=>r,M:()=>n});var i=s(61086);function r(t){if(!t)return;if(t.startsWith("http"))return t;let[e,...s]=t.split("/");return(0,i.N)().storage.from(e).getPublicUrl(s.join("/")).data.publicUrl}async function n(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];for(let t of e.filter(t=>null!=t).map(t=>{if(t.startsWith("http"))return;let[e,...s]=t.split("/");if(e.length&&s.length)return{bucket:e,nodes:s}}).filter(t=>void 0!==t))try{await (0,i.N)().storage.from(t.bucket).remove([t.nodes.join("/")])}catch(t){console.error(t)}}},21567:(t,e,s)=>{"use strict";function i(t,e){return s=>{function i(){if(!e||!s)return;let i=e.videoWidth/e.videoHeight,r=e.getBoundingClientRect(),n=r.height*i,a=r.width/i;n>r.width&&(n=r.width),a>r.height&&(a=r.height);let o=r.width-n,l=r.height-a,c=r.x+o/2,u=r.y+l/2,h=t.topx*n+c,d=t.topy*a+u,m=t.botx*n+c,p=t.boty*a+u;s.style.top=d+"px",s.style.left=h+"px",s.style.width=m-h+"px",s.style.height=p-d+"px"}null==e||e.addEventListener("loadedmetadata",i),i()}}async function r(t){var e,s;let i=Promise.withResolvers(),r=document.createElement("input");return r.multiple=null!==(e=null==t?void 0:t.multiple)&&void 0!==e&&e,r.accept=null!==(s=null==t?void 0:t.accept)&&void 0!==s?s:"*",r.type="file",r.oncancel=i.reject,r.onchange=()=>{var t;let e=Array.from(null!==(t=r.files)&&void 0!==t?t:[]);i.resolve(e)},r.click(),i.promise}function n(t,e){return t.map(function(t,s){return[t,e[s]]})}function a(t,e,s){let i=t;for(let t of e){if(!i||!(t in i))return s;i=i[t]}return null!=i?i:s}s.d(e,{JR:()=>r,QS:()=>i,Rp:()=>a,yU:()=>n})},1049:(t,e,s)=>{"use strict";s.d(e,{$:()=>o,s:()=>a});var i=s(15586),r=s(2955),n=s(14267),a=class extends r.k{#t;#e;#s;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.mutationCache,this.#t=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||("pending"===this.state.status?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){this.#s=(0,n.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#i({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});let e="pending"===this.state.status,s=!this.#s.canStart();try{if(!e){this.#i({type:"pending",variables:t,isPaused:s}),await this.#e.config.onMutate?.(t,this);let e=await this.options.onMutate?.(t);e!==this.state.context&&this.#i({type:"pending",context:e,variables:t,isPaused:s})}let i=await this.#s.start();return await this.#e.config.onSuccess?.(i,t,this.state.context,this),await this.options.onSuccess?.(i,t,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,t,this.state.context),this.#i({type:"success",data:i}),i}catch(e){try{throw await this.#e.config.onError?.(e,t,this.state.context,this),await this.options.onError?.(e,t,this.state.context),await this.#e.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,e,t,this.state.context),e}finally{this.#i({type:"error",error:e})}}finally{this.#e.runNext(this)}}#i(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),i.j.batch(()=>{this.#t.forEach(e=>{e.onMutationUpdate(t)}),this.#e.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},25848:(t,e,s)=>{"use strict";s.d(e,{n:()=>h});var i=s(12115),r=s(1049),n=s(15586),a=s(99323),o=s(84403),l=class extends a.Q{#r;#n=void 0;#a;#o;constructor(t,e){super(),this.#r=t,this.setOptions(e),this.bindMethods(),this.#l()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#r.defaultMutationOptions(t),(0,o.f8)(this.options,e)||this.#r.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#a,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.EN)(e.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():this.#a?.state.status==="pending"&&this.#a.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#a?.removeObserver(this)}onMutationUpdate(t){this.#l(),this.#c(t)}getCurrentResult(){return this.#n}reset(){this.#a?.removeObserver(this),this.#a=void 0,this.#l(),this.#c()}mutate(t,e){return this.#o=e,this.#a?.removeObserver(this),this.#a=this.#r.getMutationCache().build(this.#r,this.options),this.#a.addObserver(this),this.#a.execute(t)}#l(){let t=this.#a?.state??(0,r.$)();this.#n={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#c(t){n.j.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#n.variables,s=this.#n.context;t?.type==="success"?(this.#o.onSuccess?.(t.data,e,s),this.#o.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#o.onError?.(t.error,e,s),this.#o.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(t=>{t(this.#n)})})}},c=s(35906),u=s(96373);function h(t,e){let s=(0,c.jE)(e),[r]=i.useState(()=>new l(s,t));i.useEffect(()=>{r.setOptions(t)},[r,t]);let a=i.useSyncExternalStore(i.useCallback(t=>r.subscribe(n.j.batchCalls(t)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=i.useCallback((t,e)=>{r.mutate(t,e).catch(u.l)},[r]);if(a.error&&(0,u.G)(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}}},t=>{var e=e=>t(t.s=e);t.O(0,[555,435,467,791,982,274,527,677,814,239,547,367,396,441,517,358],()=>e(92463)),_N_E=t.O()}]);